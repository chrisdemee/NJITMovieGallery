<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>IS219 Gallery (Project 3)</title>

	<!-- Our CSS File along with Boostrap, and Bootstrap Icon Styles-->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
	<link rel="stylesheet" type='text/css' href="style.css"/>
	<!-- Movie-style display font -->
	<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
	  
	<!-- DO NOT CHANGE ANYTHING ABOVE THIS LINE-->

	<!-- Javascript Framework (e.g., vue.js) (ADD HERE) -->
	<!-- Vue 3 (production) from CDN -->
	<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>


</head>

  <body>
	<style>[v-cloak]{display:none}</style>
	<div id="vue_app" class="container" v-cloak>

	    <div class="header">

				<div class="container">
					<h1 id="app_title">{{ siteTitle }}</h1>
				</div>

	    </div>

	    <div class="main">

	      <div class="row">

			<div class="row">

				<div class="col-md-6" v-for="(movie, index) in movies" :key="index">
						<div class="thumbnail">

												<img class="poster img-fluid" :src="movie.posters && movie.posters[movie.posterindex] ? movie.posters[movie.posterindex] : ''" :alt="movie.title" @click="posterClick(index)" style="cursor:pointer" />
												<div class="imageInfo">{{ movie.posters ? `Poster ${movie.posterindex + 1} of ${movie.posters.length}` : '' }}</div>

												<p class="title">{{ movie.title }} ({{ movie.country }})</p>
												<p class="score"><i class="bi bi-star" aria-hidden="true"></i> {{ movie.iscore }} </p>
												<p class="runtime">Runtime: {{ movie.runtime }}</p>
												<p class="released">Released: {{ movie.released ? movie.released.join('-') : '' }} | Rated: {{ movie.rating }}</p>
												<p class="websites">Websites: <a :href="movie.imdb" target="_blank">imdb</a> | <a :href="movie.website" target="_blank">website</a></p>

												<div class="social">
													<button class="btn btn-sm btn-outline-success likes" @click="like(index)" aria-label="Like">
														<i class="bi bi-hand-thumbs-up" aria-hidden="true"></i>
														<span class="ms-1">{{ movie.likes }}</span>
													</button>
													<button class="btn btn-sm btn-outline-danger dislikes ms-2" @click="dislike(index)" aria-label="Dislike">
														<i class="bi bi-hand-thumbs-down" aria-hidden="true"></i>
														<span class="ms-1">{{ movie.dislikes }}</span>
													</button>
												</div>
						</div>
				</div>

			</div>
	    <div class="footer">
							<div class="container">
						<a id="github" class="btn btn-lg btn-warning" :href="githubRepo" target="_blank">
								<i class="bi bi-github me-2"></i>{{ owner }}
							</a>
							</div>
	    </div>
	</div>

	<!-- Load site.js only after Vue is available (fallback loader) -->
	<script>
	(function(){
		function loadScript(src, cb){
			var s = document.createElement('script');
			s.src = src;
			s.onload = cb;
			s.onerror = function(){ console.error('Failed to load', src); if(cb) cb(new Error('load error')); };
			document.head.appendChild(s);
		}

		function ensureVueAndLoadSite(){
			if(window.Vue){ loadScript('site.js'); return; }
			// Try primary CDN first
			loadScript('https://unpkg.com/vue@3/dist/vue.global.prod.js', function(err){
				if(window.Vue){ loadScript('site.js'); return; }
				// fallback to jsDelivr
				loadScript('https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js', function(){
					if(window.Vue) loadScript('site.js');
					else console.error('Vue failed to load from both CDNs.');
				});
			});
		}

		ensureVueAndLoadSite();
	})();
	</script>


</body>
</html>
